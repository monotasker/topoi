# coding: utf8
# try something like
def list(): 
    #settings    
    displayfield = 'name'
    
    tablename = request.args[0]
    #FIXME: Hack here to solve problem of field name not being identical to table name
    tablename = tablename + 's'    
    print tablename
        
    rowlist = ''    
    if not tablename in db.tables():
        response.flash = 'error'
    else:
        tb = db[tablename]
        rowlist = db(tb).select()
    
    listset = []
    for r in rowlist:
        i = A(r[displayfield], _href=URL('plugin_listandedit', 'edit.load', args=[tablename, r.id]), _class='plugin_listandedit_list', cid='editpane')    
        listset.append(i)
                
    return dict(listset = listset)

def edit():
    tablename = request.args[0]
    rowid = request.args[1]
    form = crud.create(db[tablename], rowid)
